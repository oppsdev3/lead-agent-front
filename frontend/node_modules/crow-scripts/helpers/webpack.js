const webpack = require('webpack')
const chalk = require('chalk')
const webpackConfig = require('../configs/webpack')


module.exports = (options) =>
  webpack(
    webpackConfig(options),
    (err, stats) => {
    if (err || stats.hasErrors()) {
      console.error(chalk.red.bold('❯ 💣 Error: '), err)
      console.error(stats.toString({ colors: true, errorDetails: true }))
      throw err
    }
  })
