const crowPreset = require('babel-preset-crow')
const path = require('path')

module.exports = ({
  targets,
  loose,
  debug,
  spec,
  useBuiltIns,
  disableCSS,
}) => ({
  test: /\.jsx?$/,
  include: [
    path.resolve(process.cwd(), 'src'),
  ],
  loader: require.resolve('babel-loader'),
  options: {
    presets: [
      crowPreset({
        targets,
        loose,
        debug,
        spec,
        useBuiltIns,
        ignoreRequireExtensions: disableCSS ? ['.css', '.scss', '.sass'] : [],
        modules: false
      })
    ]
  }
})
