const { spawnPromise, parseOptions } = require('../helpers')
const path = require('path')

module.exports = ({ stylelintOptions, extendStylelintOptions }) => {
  const params = parseOptions({
    overwriteOptions: stylelintOptions,
    extendOptions: extendStylelintOptions,
    defaultParams: [
      'src/**/*.css',
      '--allow-empty-input',
      '--color',
      '--config',
      path.resolve(__dirname, '../configs/stylelintrc.json')
    ]
  })

  return spawnPromise({ bin: 'stylelint', params })
}
