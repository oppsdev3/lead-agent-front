const { spawnPromise, parseOptions } = require('../helpers')

module.exports = ({ flowOptions, extendFlowOptions }) => {
  const params = parseOptions({
    overwriteOptions: flowOptions,
    extendOptions: extendFlowOptions,
    defaultParams: [
      '--color',
      'always',
      '--strip-root'
    ]
  })

  return spawnPromise({ bin: 'flow', params })
}
