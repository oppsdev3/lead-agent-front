const execSync = require('child_process').execSync
const path = require('path')

const currentVersion = require('../../package.json').version
const scriptPath = path.resolve(__dirname, '../create-react-crow.js')

const run = (args = '') => (
  execSync(`node ${scriptPath} ${args}`).toString().trim()
)

describe('create-react-crow', () => {
  it('should output something', () => {
    expect(run().length).toBeGreaterThan(0)
  })

  it('shows help when run without arguments', () => {
    expect(run()).toBe(run('--help'))
  })

  describe('create-react-crow --version', () => {
    it('should return version', () => {
      expect(run('--version')).toBe(currentVersion)
    })
  })

  describe('create-react-crow --help', () => {
    it('should return something', () => {
      expect(run('--help').length).toBeGreaterThan(20)
    })
  })
})
